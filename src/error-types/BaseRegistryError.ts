import { BaseError } from '../index'
import { HighLevelErrorDef, LowLevelErrorInternal } from '../interfaces'

/**
 * Improved error class generated by the ErrorRegistry.
 **/
export class BaseRegistryError extends BaseError {
  constructor (
    highLevelErrorDef: HighLevelErrorDef,
    lowLevelErrorDef: LowLevelErrorInternal
  ) {
    super(lowLevelErrorDef.message)

    if (highLevelErrorDef.codeNo) {
      this._safeMetadata.codeNo = highLevelErrorDef.codeNo
    }

    if (highLevelErrorDef.statusCode) {
      this._safeMetadata.statusCode = highLevelErrorDef.statusCode
    }

    if (lowLevelErrorDef.code) {
      this._safeMetadata.code = lowLevelErrorDef.code
    }

    if (lowLevelErrorDef.codeNo) {
      this._safeMetadata.codeNo = lowLevelErrorDef.codeNo
    }

    if (lowLevelErrorDef.statusCode) {
      this._safeMetadata.statusCode = lowLevelErrorDef.statusCode
    }
  }
}
